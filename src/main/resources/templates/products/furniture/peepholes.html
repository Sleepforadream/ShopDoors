<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base}" lang="ru">

<head>
    <title layout:fragment="title">Глазки для входных дверей</title>
</head>

<th:block layout:fragment="content">
    <div class="product-main">
        <div class="separator-with-shadow" style="padding-top: 0;padding-bottom: 0;margin-top: 0;">
            <div class="separator-with-shadow-box" style="margin-top: 0;"></div>
        </div>
        <HEADER class="product-data-title">Глазки для входных дверей</HEADER>
        <div class="separator-with-shadow" style="padding-top: 0;padding-bottom: 0;margin-top: 0;">
            <div class="separator-with-shadow-box" style="margin-top: 0;"></div>
        </div>
        <div class="filter-controls">
            <label for="fabric">Фабрика:</label>
            <select id="fabric" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="MORELLI" th:selected="${fabric == 'MORELLI'}">Морелли</option>
                <option value="PUNTO" th:selected="${fabric == 'PUNTO'}">Пунто</option>
                <option value="ARMADILLO" th:selected="${fabric == 'ARMADILLO'}">Армадилло</option>
                <option value="FUARO" th:selected="${fabric == 'FUARO'}">Фуаро</option>
            </select>
            <label for="metal">Толщина металла:</label>
            <select id="metal" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="THICKNESS_01" th:selected="${metal == 'THICKNESS_01'}">Толщина 1мм</option>
                <option value="THICKNESS_02" th:selected="${metal == 'THICKNESS_02'}">Толщина 2мм</option>
                <option value="THICKNESS_03" th:selected="${metal == 'THICKNESS_03'}">Толщина 3мм</option>
                <option value="THICKNESS_04" th:selected="${metal == 'THICKNESS_04'}">Толщина 4мм</option>
                <option value="THICKNESS_05" th:selected="${metal == 'THICKNESS_05'}">Толщина 5мм</option>
                <option value="THICKNESS_06" th:selected="${metal == 'THICKNESS_06'}">Толщина 6мм</option>
                <option value="THICKNESS_07" th:selected="${metal == 'THICKNESS_07'}">Толщина 7мм</option>
                <option value="THICKNESS_08" th:selected="${metal == 'THICKNESS_08'}">Толщина 8мм</option>
                <option value="THICKNESS_09" th:selected="${metal == 'THICKNESS_09'}">Толщина 9мм</option>
                <option value="THICKNESS_10" th:selected="${metal == 'THICKNESS_10'}">Толщина 10мм</option>
                <option value="THICKNESS_11" th:selected="${metal == 'THICKNESS_11'}">Толщина 11мм</option>
                <option value="THICKNESS_12" th:selected="${metal == 'THICKNESS_12'}">Толщина 12мм</option>
            </select>
            <label for="coating">Покрытие:</label>
            <select id="coating" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="CHROME" th:selected="${coating == 'CHROME'}">Хром</option>
                <option value="MATTE_CHROME" th:selected="${coating == 'MATTE_CHROME'}">Матовый хром</option>
                <option value="GOLD" th:selected="${coating == 'GOLD'}">Золото</option>
                <option value="MATTE_GOLD" th:selected="${coating == 'MATTE_GOLD'}">Матовое золото</option>
                <option value="BRONZE" th:selected="${coating == 'BRONZE'}">Бронза</option>
                <option value="BLACK" th:selected="${coating == 'BLACK'}">Чёрный</option>
                <option value="WHITE" th:selected="${coating == 'WHITE'}">Белый</option>
                <option value="GRAPHITE" th:selected="${coating == 'GRAPHITE'}">Графит</option>
            </select>
            <label for="maximumDepth">Максимальная глубина:</label>
            <select id="maximumDepth" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="90" th:selected="${maximumDepth == 90}">90 мм</option>
                <option value="100" th:selected="${maximumDepth == 100}">100 мм</option>
                <option value="110" th:selected="${maximumDepth == 110}">110 мм</option>
                <option value="120" th:selected="${maximumDepth == 120}">120 мм</option>
                <option value="130" th:selected="${maximumDepth == 130}">130 мм</option>
                <option value="140" th:selected="${maximumDepth == 140}">140 мм</option>
                <option value="150" th:selected="${maximumDepth == 150}">150 мм</option>
                <option value="160" th:selected="${maximumDepth == 160}">160 мм</option>
                <option value="170" th:selected="${maximumDepth == 170}">170 мм</option>
                <option value="180" th:selected="${maximumDepth == 180}">180 мм</option>
                <option value="190" th:selected="${maximumDepth == 190}">190 мм</option>
                <option value="200" th:selected="${maximumDepth == 200}">200 мм</option>
            </select>
            <label for="minimumDepth">Минимальная глубина:</label>
            <select id="minimumDepth" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="50" th:selected="${minimumDepth == 50}">50 мм</option>
                <option value="60" th:selected="${minimumDepth == 60}">60 мм</option>
                <option value="70" th:selected="${minimumDepth == 70}">70 мм</option>
                <option value="80" th:selected="${minimumDepth == 80}">80 мм</option>
                <option value="90" th:selected="${minimumDepth == 90}">90 мм</option>
                <option value="100" th:selected="${minimumDepth == 100}">100 мм</option>
                <option value="110" th:selected="${minimumDepth == 110}">110 мм</option>
                <option value="120" th:selected="${minimumDepth == 120}">120 мм</option>
                <option value="130" th:selected="${minimumDepth == 130}">130 мм</option>
                <option value="140" th:selected="${minimumDepth == 140}">140 мм</option>
            </select>
            <label for="peepholeType">Тип глазка:</label>
            <select id="peepholeType" onchange="updateFilters()">
                <option value="">Все</option>
                <option value="LIGHT_ENHANCED" th:selected="${peepholeType == 'LIGHT_ENHANCED'}">Светоусиленный</option>
                <option value="BULLETPROOF" th:selected="${peepholeType == 'BULLETPROOF'}">Пуленепробиваемый</option>
                <option value="ELECTRIC" th:selected="${peepholeType == 'ELECTRIC'}">Электронный</option>
            </select>
            <label for="sort">Сортировать по:</label>
            <select id="sort" onchange="updateSort()">
                <option value="name,asc" th:selected="${sortBy == 'name' and order == 'asc'}">Имя (А-Я)</option>
                <option value="name,desc" th:selected="${sortBy == 'name' and order == 'desc'}">Имя (Я-А)</option>
                <option value="price,asc" th:selected="${sortBy == 'price' and order == 'asc'}">Цена (возрастание)</option>
                <option value="price,desc" th:selected="${sortBy == 'price' and order == 'desc'}">Цена (убывание)</option>
                <option value="fabric,asc" th:selected="${sortBy == 'fabric' and order == 'asc'}">Фабрика (А-Я)</option>
                <option value="fabric,desc" th:selected="${sortBy == 'fabric' and order == 'desc'}">Фабрика (Я-А)</option>
            </select>
        </div>
        <div class="product-grid">
            <th:block th:each="peephole : ${peepholes}">
                <div class="product-card">
                    <img th:src="@{${peephole.imagePath}}" alt="Product Image" class="product-image">
                    <h2 th:text="${peephole.name}">Product Name</h2>
                    <p th:text="${peephole.price} + ' ₽'">Price</p>
                    <a th:href="@{peepholes/{id}(id=${peephole.uuid})}" class="product-link">Подробнее</a>
                </div>
            </th:block>
        </div>
        <div class="separator-with-shadow">
            <div class="separator-with-shadow-box"></div>
        </div>
    </div>
    <script>
        function updateFilters() {
            const fabricSelect = document.getElementById("fabric");
            const metalSelect = document.getElementById("metal");
            const coatingSelect = document.getElementById("coating");
            const maximumDepthSelect = document.getElementById("maximumDepth");
            const minimumDepthSelect = document.getElementById("minimumDepth");
            const peepholeTypeSelect = document.getElementById("peepholeType");
            const sortSelect = document.getElementById("sort");
            const selectedSortOption = sortSelect.value;
            const [sortBy, order] = selectedSortOption.split(",");

            const url = new URL(window.location.href);
            url.searchParams.set("fabric", fabricSelect.value);
            url.searchParams.set("metal", metalSelect.value);
            url.searchParams.set("coating", coatingSelect.value);
            url.searchParams.set("maximumDepth", maximumDepthSelect.value);
            url.searchParams.set("minimumDepth", minimumDepthSelect.value);
            url.searchParams.set("peepholeType", peepholeTypeSelect.value);
            url.searchParams.set("sortBy", sortBy);
            url.searchParams.set("order", order);
            window.location.href = url.toString();
        }

        function updateSort() {
            updateFilters();
        }
    </script>
</th:block>
</html>